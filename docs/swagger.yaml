definitions:
  api.HealthResponse:
    properties:
      service:
        type: string
      status:
        type: string
      time:
        type: string
    type: object
  api.ReadinessResponse:
    properties:
      checks:
        additionalProperties:
          type: string
        type: object
      service:
        type: string
      status:
        type: string
      time:
        type: string
    type: object
  models.MetricResponse:
    properties:
      channel:
        type: string
      clicks:
        type: integer
      closed_won:
        type: integer
      cost:
        type: number
      cpa:
        description: Cost por adquisición = cost / leads
        type: number
      cpc:
        description: Métricas adicionales calculadas automáticamente a partir de los
          datos principales
        type: number
      cvr_lead_to_opp:
        description: Tasa de conversión de Lead a Opportunity
        type: number
      cvr_opp_to_won:
        description: Tasa de conversión de Opportunity a ClosedWon
        type: number
      leads:
        type: integer
      opportunities:
        type: integer
      revenue:
        type: number
      roas:
        description: Retorno de inversión publicitaria = revenue / cost
        type: number
      utm_campaign:
        type: string
      utm_medium:
        type: string
      utm_source:
        type: string
    type: object
info:
  contact: {}
paths:
  /admin/reset:
    post:
      consumes:
      - application/json
      description: Limpia completamente la base de datos en memoria, eliminando todas
        las métricas y lotes procesados.
      produces:
      - application/json
      responses:
        "200":
          description: Datos reseteados correctamente
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Resetea todos los datos almacenados
      tags:
      - admin
  /healthz:
    get:
      consumes:
      - application/json
      description: Verifica que el servicio esté funcionando
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.HealthResponse'
      summary: Health check básico
      tags:
      - health
  /ingest/run:
    post:
      consumes:
      - application/json
      description: Ejecuta un proceso ETL que extrae datos de ADS y CRM y guarda los
        resultados. Soporta filtrado por fecha con el parámetro 'since'.
      parameters:
      - description: Fecha desde la cual filtrar datos (YYYY-MM-DD)
        in: query
        name: since
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: ETL completado correctamente
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Parámetro de fecha inválido
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Ejecuta el proceso ETL de ingestión
      tags:
      - ingest
  /metrics:
    get:
      consumes:
      - application/json
      description: Retorna un listado de métricas con información de campañas, clics,
        costo, leads, ventas y métricas calculadas (CPC, CPA, CVR, ROAS).
      produces:
      - application/json
      responses:
        "200":
          description: Lista de métricas con cálculos incluidos
          schema:
            items:
              $ref: '#/definitions/models.MetricResponse'
            type: array
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Obtiene métricas almacenadas con cálculos derivados
      tags:
      - metrics
  /metrics/channel:
    get:
      consumes:
      - application/json
      description: Retorna métricas filtradas por canal con soporte para fechas y
        paginación
      parameters:
      - description: Fecha desde (YYYY-MM-DD)
        in: query
        name: from
        type: string
      - description: Fecha hasta (YYYY-MM-DD)
        in: query
        name: to
        type: string
      - description: Canal específico
        in: query
        name: channel
        type: string
      - default: 50
        description: Límite de resultados
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset para paginación
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.MetricResponse'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Obtiene métricas por canal
      tags:
      - metrics
  /metrics/funnel:
    get:
      consumes:
      - application/json
      description: Retorna métricas de conversión filtradas por campaña con soporte
        para fechas y paginación
      parameters:
      - description: Fecha desde (YYYY-MM-DD)
        in: query
        name: from
        type: string
      - description: Fecha hasta (YYYY-MM-DD)
        in: query
        name: to
        type: string
      - description: Campaña específica
        in: query
        name: utm_campaign
        type: string
      - default: 50
        description: Límite de resultados
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset para paginación
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.MetricResponse'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Obtiene métricas de funnel por campaña
      tags:
      - metrics
  /readyz:
    get:
      consumes:
      - application/json
      description: Verifica que el servicio esté listo para recibir tráfico
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.ReadinessResponse'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/api.ReadinessResponse'
      summary: Readiness check
      tags:
      - health
swagger: "2.0"
